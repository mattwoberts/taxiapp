<!DOCTYPE html> 
<html> 
	<head> 
	<title>Book a taxi</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
	<script src="lib/jquery.ui.map.js"></script>
	<script type="text/javascript" src="lib/jquery.ui.map.extensions.js"></script>
	<script type="text/javascript">



	$(document).bind('pageinit', function() {		
		$('#map_canvas').gmap().bind('init', function(evt, map) {
			$('#map_canvas').gmap('getCurrentPosition', function(position, status) {
				if ( status === 'OK' ) {
					var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
					$('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds': true});
					$('#map_canvas').gmap('addShape', 'Circle', { 
						'strokeWeight': 0, 
						'fillColor': "#008595", 
						'fillOpacity': 0.25, 
						'center': clientPosition, 
						'radius': 15, 
						'clickable': false 
					});
				}
			});   
		});	

		$('#book').click(function() {
			// Need to send a book taxi request to the cloud.
			// The request needs to include:
			// 1) A name of the person
			// 2) Ideally, a phone number would be nice
			// 3) A booking reference
			// Send to the cloud, and get back a booking reference.

			// make a post request to the nice API


			console.log("ok");

		});

		
	});


	</script>
</head> 
<body> 

<div data-role="page">

	<div data-role="header">
		<h1>Book yourself a nice taxi</h1>
	</div><!-- /header -->

	<div data-role="content">	

		<div class="map" id="map_canvas"></div>
		<div><a id="book" data-role="button">Book!</a></div>

	</div><!-- /content -->

</div><!-- /page -->

</body>
</html>